// implementation of stack using prefix, postfix, infix
#include<stdio.h>
#include<math.h>
#include<ctype.h>
#include<string.h>

int operand[100];
char operator[100];
int top1=-1, top2=-1;
 

  void doProcess(){                  //process fun step1 pop and set var x y
    int x = operand[top1--]; //first assign then dec
      int y = operand[top1--];
      char op = operator[top2--];  // 2 step pop operator form the stack
      int z;
      switch(op){
        case'+':           // perfrom operation from teh operands
        z = y + x;
        break;
        case'-':
        z = y-x;
        break;
        case'*':
        z = y * x;
        break;
        case'^':
        z= (int)round(pow(y, x));   // pow fun return type double  round fun for poq to round() typecasting
        break;
      }    
      operand[++top1] = z;  
  }          
  int precedence(char op){
    switch(op){
        case'+':
        case'-':
        return 1;
        case'*':
        case'/':
        return 2;
        case '^':
return 3;
default:
return 0;
    }
  }                       
 int evalInfixExpression(char* exp){   // * this means pointer store array
    for(int i=0; i<strlen(exp); i++){
  char ch = exp[i];
  if(isdigit(ch)){
    int num =0;
    while( DIGIT(EXP[I])){
        num = num * 10+exp[i]-'0';
        i++;
    }
i--;
operand[++top1] = num;
  }
  else if(ch=='+' || ch=='-' || ch=='*'|| ch=='/'|| ch=='^'){
        if(top2=-1)   // check if it is empty by -1 if not chck its prec is less  equal than the top and untill the current precedence is empty
        operator[++top2] = ch;
        else{
                while(top2!= -1 && precedence(ch)<=precedence(operator[top2])){
                    doProcess();
                }
        }
        operator[++top2] = ch;
  }
  else if(ch=='('){
    operator[++top2] = ch;
  }
  else if(ch==')'){
        while(operator[top2]!= '('){
            doProcess();
        }
        top2--;
  }
  while(top2 !=-1){
    doProcess();
  }
  return operand[top1--];
    }
    
 }
 int main(){
char expr[100];
printf("enter infix expression: ");
gets(expr);
int result = evalInfixExpression(expr);
printf("result of expression %s = %d\n", expr, result);
return 0;
    }
